{% extends "layout.html" %}
{% load experiments %}
{% block css %}
  <link rel="stylesheet" href="/css/finance.css" type="text/css" media="screen" charset="utf-8">
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/themes/ui-lightness/jquery-ui.css" type="text/css" media="screen" charset="utf-8">
  <link rel="stylesheet" href="/css/modalbox.css" type="text/css" media="screen" charset="utf-8">
  <!-- <link rel="stylesheet" href="/css/styles.css" type="text/css" media="screen" charset="utf-8"> -->
{% endblock %}

{% block scripts %}
  <!--[if IE]><script language="javascript" type="text/javascript" src="/js/flotr/excanvas.js"></script><![endif]-->
  <script language="javascript" type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
  <script language="javascript" type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/jquery-ui.min.js"></script>
  <script language="javascript" type="text/javascript" src="/js/prototype.js"></script>
  <script language="javascript" type="text/javascript" src="/js/scriptaculous.js"></script>
  <script language="javascript" type="text/javascript" src="/js/flotr/base64.js"></script>
  <script language="javascript" type="text/javascript" src="/js/flotr/canvas2image.js"></script>
  <script language="javascript" type="text/javascript" src="/js/flotr/canvastext.js"></script>
  <script language="javascript" type="text/javascript" src="/js/flotr/flotr.js"></script>
  <script language="javascript" type="text/javascript"  src="/js/effects.js"></script> 
  <script language="javascript" type="text/javascript"  src="/js/controls.js"></script> 
  <script language="javascript" type="text/javascript"  src="/js/builder.js"></script>
  <script type="text/javascript"  src="/js/modalbox.js"></script>
  <script language="javascript" type="text/javascript"  src="/js/dragdrop.js"></script> 
  <script type="text/javascript" src="/js/humble/HumbleFinance.js"></script>
  <script type="text/javascript" src="/js/charting.js"></script>
  <script type="text/javascript" src="/js/prototip/prototip.js"></script>
  <script type="text/javascript" src="/js/custom.js"></script>
  <script language="javascript" type="text/javascript"  src="/js/experiments.js"></script>
  <script type="text/javascript" >
    js = {{ result|safe }};
  </script>
  <script type="text/javascript" src="/js/sparrow.js"></script>
{% endblock %}

{% block content %}
  <div class="left_main grid_12">
    <div class="query_section clearfix">
      <form id="queryform" action="/query/" method="get">
		<div class="queries grid_12">
			<div class="bull_queries grid_4">
			  <h2>Bullish Heuristics</h2>
			  <ul id="buybank" class="query_bank buy_queries">
					<li class="immutable">rsi(14) <= 30</li>
					<li class="immutable">rsi(14) is_crossing 30</li>
					<li class="immutable">rsi(14) is_increasing</li>
					<li class="immutable">rsi(14) gradient is_increasing</li>
					<li class="immutable">slow_stochastic(5) <= 30</li>
					<li class="immutable">slow_stochastic(5) is_crossing 30</li>
                    <li class="immutable">slow_stochastic(5) is_increasing</li>
					<li class="immutable">slow_stochastic(5) gradient is_increasing</li>
					<li class="immutable">slow_stochastic_signal(5,5) is_crossing 30</li>
					<li class="immutable">macd(17,8) >= macd_signal(17,8,9)</li>
                    <li class="immutable">macd(17,8) is_increasing</li>
					<li class="immutable">macd(17,8) gradient is_increasing</li>
					<li class="immutable">macd_histogram(17,8,9) is_increasing</li>
					<li class="immutable">macd_histogram(17,8,9) gradient is_increasing</li>
			  </ul> 
			</div>
			<div class="reversible_queries grid_4">
			  <h2>Reversal Heuristics</h2>     
			  <ul class="query_bank reversible_queries">
                    <li class="immutable">rsi(14) is_crossing 50</li>
                    <li class="immutable">rsi(14) speed is_decreasing</li>
                    <li class="immutable">slow_stochastic(5) is_crossing slow_stochastic_signal(5,5)</li>
                    <li class="immutable">slow_stochastic(5) speed is_decreasing</li>
                    <li class="immutable">macd(17,8) is_crossing 0</li>
                    <li class="immutable">macd(17,8) is_crossing macd_signal(17,8,9)</li>
                    <li class="immutable">macd(17,8) speed is_decreasing</li>
                </ul>
			</div>
			<div class="bear_queries grid_4">
			  <h2>Bearish Heuristics</h2>     
			  <ul class="query_bank sell_queries">
                    <li class="immutable">rsi(14) >= 70</li>
					<li class="immutable">rsi(14) is_crossing 70</li>
					<li class="immutable">rsi(14) is_decreasing</li>
					<li class="immutable">rsi(14) gradient is_decreasing</li>
				    <li class="immutable">slow_stochastic(5) >= 70</li>
					<li class="immutable">slow_stochastic(5) is_crossing 70</li>
					<li class="immutable">slow_stochastic(5) is_decreasing</li>
					<li class="immutable">slow_stochastic(5) gradient is_decreasing</li>
					<li class="immutable">slow_stochastic_signal(5,5) is_crossing 70</li>
                    <li class="immutable">macd(17,8) <= macd_signal(17,8,9)</li>
                    <li class="immutable">macd(17,8) is_decreasing</li>
					<li class="immutable">macd(17,8) gradient is_decreasing</li>
					<li class="immutable">macd_histogram(17,8,9) is_decreasing</li>
					<li class="immutable">macd_histogram(17,8,9) gradient is_decreasing</li>
			  </ul> 
			</div>
		</div>

		<div class="query_drop grid_12">
			<div class="droppable grid_6">
				<div id="buydrop" class="drop_header">
					<h2>Buy when</h2>
					 <a href="" class="add_query buy_query">[+]</a>
				</div>
				<ul id="query" class="query_area buy_queries">
					<li>
						<a href="" class="rm_query">x</a>
						<input name="buy_query" type="hidden" value="{{params.query}}"/>
						<p class="query_string">{{params.query}}</p>
					</li>
				</ul>
			</div>
			<div class="droppable grid_6">
				<div class="drop_header">
					<h2>Sell when</h2>
					 <a href="" class="add_query sell_query">[+]</a>
				</div>
				<ul class="query_area sell_queries"></ul>
			</div>
		</div>
        <div class="query_input grid_12">
            <input name="symbol" id="symbol" type="text" value="{{params.symbol}}"/>
            <input name="start_date" id="start_date" type="text" value="{{params.start_date}}"/>
            <input name="end_date" id="end_date" type="text" value="{{params.end_date}}"/>
        </div>
        <input id="fsubmit" type="submit" value="Submit!"/>
      </form>
		<div class="query_summary">
			<dl>
				<dt>Buy and Hold Value:</dt><dd id="buy_and_hold_value"></dd>
				<dt>Strategy Value:</dt><dd id="strategy_value"></dd>
				<dt>Performance Over Buy and Hold:</dt><dd id="performance_delta"></dd>
			</dl>
		</div>
    </div>
		<div id="loader" style="display:none;">&nbsp;</div>

		<div id="graph_section">
		  <div id="graphcontainer">
			<div id="finance">
			  <div id="labels">
				<div id="dateRange">&nbsp;</div>
			  </div>
			</div>
		  </div>
		</div> <!-- close graph_section -->
		<div class="trade_history"></div>

  </div> <!-- close left main -->
{% endblock %}
